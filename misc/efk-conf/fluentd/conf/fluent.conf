<system>
  log_level info
</system>
<source>
  @type forward
</source>

# Use the forward Input plugin and the fluent-cat command to feed events:
#  $ echo '{"event":"message"}' | fluent-cat test.tag
<match test.tag>
  @type copy

  # Dump the matched events.
  <store>
    @type stdout
  </store>

  # Feed the dumped events to your plugin.
  <store>
    @type swift
    ssl_verify false
    # auth_url OS_AUTH_URL
    auth_url http://cloud:5000/v3
    # project_name OS_PROJECT_NAME
    project_name test
    # auth_user OS_USERNAME
    auth_user demo
    # auth_api_key OS_PASSWORD
    auth_api_key demo
    # domain_name  OS_REGION_NAME
    domain_name  "Default"
    #  auth_region RegionOne

    swift_container CONTAINER_NAME
    path logs/${tag}/%Y/%m/%d/
    swift_object_key_format %{path}%{time_slice}_%{index}.%{file_extension}
#    swift_object_key_format %{path}%{uuid_flush}-%{time_slice}_%{index}.%{file_extension}
#    swift_object_key_format %{path}%{uuid}-%{time_slice}_%{index}.%{file_extension}

    <buffer time,tag>
      @type file
      path /fluentd/log/app/swift
      timekey 30s
      timekey_wait 5s
      timekey_use_utc true
    </buffer>
    <format>
      @type json
    </format>
  </store>
</match>
